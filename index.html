<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>D3.js collapsible tree with boxes</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" type="text/css" href="styles/okrtree.css">

    <script src="https://cdn.rawgit.com/eligrey/canvas-toBlob.js/f1a01896135ab378aa5c0118eadd81da55e698d8/canvas-toBlob.js"></script>
    <script src="https://cdn.rawgit.com/eligrey/FileSaver.js/e9d941381475b5df8b7d7691013401e171014e89/FileSaver.min.js"></script>
    <script src="https://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <script src="https://d3js.org/d3.v3.min.js" type="text/javascript"></script>
    <script src="scripts/okrtree.js" type="text/javascript"></script>
  </head>
  <body>
    <button id='saveButton'>Export to PNG</button>
    <div class="container">
        <ct-visualization id="tree-container"></ct-visualization>  
        <script>
            var width = 300, height = 300;
            //d3.json("data-example.json", function(error, json) {
              //treeBoxes('', json.tree);
						//});

            var data= { 	"tree" : { 		"nodeName" : "Node name 1", 		"entiy" : "CSO", 		"type" : "CSO Objectives", 		"code" : "CO2100002", 		"label" : "Increase margin and transform our service model through digitalization, automation, data and AI", 		"StartDate" : "01/01/2021", 		"EndDate" : "30/06/2021", 		"Owner" : "Aliette Mousnier-Lompre OBS/SCE/CSO/EM", 		"link" : { 				"name" : "Link NODE NAME 1", 				"nodeName" : "NODE NAME 1", 				"direction" : "ASYNC" 			}, 		"children" : [{ 			"nodeName" : "NODE NAME 2.2", 			"entiy" : "CSO", 			"type" : "Key Result", 			"code" : "KR2100024", 			"label" : "We focus on OBS profitability through cost control, continuous improvement, cost structure change monitoring and smart workforce management", 			"StartDate" : "01/01/2021", 			"EndDate" : "30/06/2021", 			"Owner" : "Aliette Mousnier-Lompre OBS/SCE/CSO/EM", 			"link" : { 					"name" : "Link node 1 to 2.2", 					"nodeName" : "NODE NAME 2.2", 					"direction" : "ASYN" 				}, 			"children" : [{ 				"nodeName" : "NODE NAME 2.2.1", 				"entiy" : "CSO • SATO", 				"type" : "Project", 				"code" : "CSO210035", 				"label" : "Data Layer Simplification", 				"StartDate" : "23/02/2021", 				"EndDate" : "31/12/2022", 				"Owner" : "Marc Person OBS/SCE/CSO/SATO/D4OPS/DEN", 				"link" : { 						"name" : "Link node 1 to 2.2", 						"nodeName" : "NODE NAME 2.1.2", 						"direction" : "ASYN" 					}, 				"children" : [] 			}] 		}, { 				"nodeName" : "NODE NAME 2.1", 				"entiy" : "SATO", 				"type" : "Entity Objectives", 				"code" : "EO2100002", 				"label" : "More agile operational performance management thanks to insights, tools and a common practice", 				"StartDate" : "01/01/2021", 				"EndDate" : "30/06/2021", 				"Owner" : "Miguel Alvarez OBS/SCE/CSO/SATO/EM", 				"link" : { 						"name" : "Link node 1 to 2.1", 						"nodeName" : "NODE NAME 2.1", 						"direction" : "ASYN" 					}, 				"children" : [{ 						"nodeName" : "NODE NAME 3.1", 						"entiy" : "SATO", 						"type" : "Key Result", 						"code" : "KR2100004", 						"label" : "Ensure consistent cost model between presales and post-sales for Service Desk and FOIS (ESBU-led project)", 						"StartDate" : "01/01/2021", 						"EndDate" : "30/06/2021", 						"targetValue" : "", 						"Owner" : "Miguel Alvarez OBS/SCE/CSO/SATO/EM", 						"link" : { 								"name" : "Link node 2.1 to 3.1", 								"nodeName" : "NODE NAME 3.1", 								"direction" : "ASYN" 							}, 						"children" : [] 					}, { 						"nodeName" : "NODE NAME 3.2", 						"entiy" : "SATO", 						"type" : "Key Result", 						"code" : "KR2100004", 						"label" : "Federate CSO vision and methodology regarding profitability management ", 						"StartDate" : "01/01/2021", 						"EndDate" : "30/06/2021", 						"Owner" : "Miguel Alvarez OBS/SCE/CSO/SATO/EM", 						"targetValue" : "", 						"link" : { 								"name" : "Link node 2.1 to 3.2", 								"nodeName" : "NODE NAME 3.1", 								"direction" : "ASYN" 							}, 						"children" : [] 					} 				] 			}, { 				"nodeName" : "NODE NAME 2.3", 				"entity" : "IBO", 				"type" : "Entity Objectives", 				"code" : "EO2100007", 				"label" : "Deliver operational excellence in our everyday activities", 				"StartDate" : "01/01/2021", 				"EndDate" : "30/06/2021", 				"Owner" : "Matthieu Devaux OBS/SCE/CSO/IBO", 				"link" : { 						"name" : "Link node 1 to 2.3", 						"nodeName" : "NODE NAME 2.3", 						"direction" : "ASYN" 					}, 				"children" : [{ 						"nodeName" : "NODE NAME 3.3", 						"entity" : "IBO", 						"type" : "Key Result", 						"code" : "KR2100034", 						"label" : "Contribute to €2.8m to the transformation through OEC & UCE & govern the global IBO plan", 						"StartDate" : "01/01/2021", 						"EndDate" : "30/06/2021", 						"Owner" : "Matthieu Devaux OBS/SCE/CSO/IBO", 						"targetValue" : "€2.8m", 						"link" : { 								"name" : "Link node 2.3 to 3.3", 								"nodeName" : "NODE NAME 3.3", 								"direction" : "ASYN" 							}, 						"children" : [] 					}, { 						"nodeName" : "NODE NAME 3.4", 						"entity" : "IBO", 						"type" : "Key Result", 						"code" : "KR2100032", 						"label" : "mNPS @ 8.3", 						"StartDate" : "01/01/2021", 						"EndDate" : "30/06/2021", 						"Owner" : "Matthieu Devaux OBS/SCE/CSO/IBO", 						"targetValue" : "8.3", 						"link" : { 								"name" : "Link node 2.3 to 3.4", 								"nodeName" : "NODE NAME 3.4", 								"direction" : "ASYN" 							}, 						"children" : [] 					} 				] 			} 		] 	} };
            treeBoxes('', data.tree);

        </script>
    </div>
</body>
</html>